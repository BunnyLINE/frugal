---
base: 'ubuntu/trusty'

apt:
  packages:
    - automake
    - libtool
    - g++
    - byacc
    - make
    - pkg-config
    - flex
    - git
    - wget

after_install:
  - wget https://storage.googleapis.com/golang/go1.5.1.src.tar.gz -nv
  - tar -C /usr/local -xzf go1.5.1.src.tar.gz 
  - export PATH=$PATH:/usr/local/go/bin
  - git clone https://git-wip-us.apache.org/repos/asf/thrift.git
  - cd thrift
  - ./bootstrap.sh
  - ./configure
  - make
  - make install
  - cd ..
  - rm -rf thrift
  - mkdir -p /frugal/bin
  - cp /build/smithy/frugal /frugal/bin
  - chmod 755 /frugal/bin/frugal

volumes:
  - 'data'

workdir: /frugal/bin

cmd: ["/frugal/bin/frugal"]
